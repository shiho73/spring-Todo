<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>タスク登録</title>

		<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
		<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1/jquery-ui.min.js"></script>
		<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1/i18n/jquery.ui.datepicker-ja.min.js"></script>
		<link rel="stylesheet" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1/themes/humanity/jquery-ui.css" >

<!-- カレンダー表示用jQuery -->
		<script>
			  $(function() {
			    $("#datepicker").datepicker();
			  });
		</script>

<!-- 新規登録ボタン＆背景jQuery		 -->
		<link rel="stylesheet" href="/0000.css">

		<script>
			$(function() {

			  // check if browser is not supported
			  var $browserAlert = $('#browserAlert');
			  $browserAlert.hide();

			  $.ajax({
			    url: 'https://cdn.rawgit.com/arasatasaygin/is.js/master/is.min.js',
			    dataType: "script",
			    success: function() {

			      if (is.edge() || is.ie()) {
			        $browserAlert.find('span').text('View on Chrome/Firefox.');
			        $browserAlert.show();
			        $browserAlert.addClass('active');
			      }

			    }
			  });

			  var $btn = $("button.btnSubmit");
			  var $loaderTemplate = $("svg.loader");
			  var $checkmarkTemplate = $("svg.checkmark");

			  $btn.on('click', function() {
			    if ($(this).hasClass('clicked')) return;
			    $(this).addClass('clicked');
			    var self = $(this);
			    var timeout1 = 600,
			      timeout2 = 2500,
			      timeout3 = 3000;
			    setTimeout(function() {

			      self.append($loaderTemplate.clone());
			      self.find('svg').removeClass('svg--template');
			      self.find('svg').css('display', 'initial');
			    }, timeout1);
			    setTimeout(function() {
			      self.text('');
			      self.find('svg').remove();
			      self.append($checkmarkTemplate.clone());
			      self.find('svg').css('display', 'initial');
			      self.find('svg').removeClass('svg--template');
			      self.addClass('done');
			    }, timeout1 + timeout2);
			    setTimeout(function() {
			      self.find('svg').remove();
			      self.text('Submit');
			      self.removeClass('clicked');
			      self.removeClass('done');
			    }, timeout1 + timeout2 + timeout3);
			  });

			});
		</script>


</head>
<body>
<h1>タスク登録</h1>
	<span th:replace="menu"></span>

	<p th:text="${msg1}" style="color:red"></p>
	<p th:text="${msg2}" style="color:red"></p>

		<form action="/list/add"  method="post">
		<input type="hidden" name="userId" th:value="${session.userInfo.id}">

		<table border="1">
	<tr>
		<th>タスク名</th><td><input type="text" name="name"></td>
	</tr>

	<tr>
 		<th>作成者</th><td th:text="${session.userInfo.name}"></td>
 	</tr>

 	<tr>
		<th>期限</th><td><input type="text" name="dline" id="datepicker"></td>
	</tr>

	<tr>
		<th>優先順位</th>
	<td><select name="prtNum">
			<option th:each="p:${plist}" th:value="${p.num}" th:text="${p.name}">
		</select>
	</td>
	</tr>

	<tr>
		<th>カテゴリ番号</th>
		<td>
			<select name="cgCode">
				<option th:each="c:${clist}" th:value="${c.code}" th:text="${c.code}+'：'+${c.name}">
			</select>
		<a href="/option" onclick="openPopup();">新規カテゴリ登録</a>
	</td>
	</tr>

	<tr>
		<th>グループ番号</th>
		<td>
			<select name="groupId">
				<option th:each="g:${glist}" th:value="${g.id}" th:text="${g.id}+'：'+${g.name}">
			</select>
			<a href="/group/new" onclick="openPopup();">新規グループ登録</a>
		</td>
	</tr>

	<tr>
		<th>備考</th><td><textarea name="memo" cols="40" rows="5"></textarea></td>
	</tr>

</table>

<input type="reset" value="リセット">
<br>


<!-- デザイン -->
		<svg class="svg--template loader">
		  <circle class="circle1" stroke="none" stroke-width="4" fill="none" r="25" cx="25" cy="25"/>
		</svg>
		<svg class="svg--template checkmark" viewBox="0 0 50 50">
		  <g class="checkmark1">
		    <path class="line1" d="M20.8,36l-4,4c-0.7,0.7-1.7,0.7-2.4,0L0.8,26.4c-0.7-0.7-0.7-1.7,0-2.4l4-4c0.7-0.7,1.7-0.7,2.4,0l13.6,13.6
		    C21.5,34.3,21.5,35.4,20.8,36z"/>
		  <path class="line2" d="M14.5,39.9l-4-4c-0.7-0.7-0.7-1.7,0-2.4L43.4,0.6c0.7-0.7,1.7-0.7,2.4,0l4,4c0.7,0.7,0.7,1.7,0,2.4L16.9,39.9
		    C16.3,40.6,15.2,40.6,14.5,39.9z"/>
		  </g>
		</svg>

		<svg class="svg--template" viewBox="0 0 304 305" version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg">
		  <symbol id="shadow--logo-dribbble">
		    <path id="SVGID_1_" d="M152,298.2C73,298.2,8.7,234,8.7,155.1C8.7,76.2,73,12,152,12c79,0,143.3,64.2,143.3,143.1
		      C295.3,234,231,298.2,152,298.2L152,298.2z M272.8,174.7c-4.2-1.3-37.9-11.4-76.2-5.2c16,43.9,22.5,79.7,23.8,87.1
		      C247.8,238.1,267.4,208.7,272.8,174.7L272.8,174.7z M199.8,267.8c-1.8-10.7-8.9-48.1-26.1-92.7c-0.3,0.1-0.5,0.2-0.8,0.3
		      c-69,24-93.8,71.8-96,76.3c20.8,16.2,46.8,25.8,75.1,25.8C168.9,277.5,185.1,274.1,199.8,267.8L199.8,267.8z M61.1,237
		      c2.8-4.7,36.4-60.3,99.5-80.7c1.6-0.5,3.2-1,4.8-1.5c-3.1-6.9-6.4-13.9-9.9-20.7C94.3,152.4,35,151.7,29.7,151.6
		      c0,1.2-0.1,2.5-0.1,3.7C29.6,186.7,41.5,215.4,61.1,237L61.1,237z M32.2,130.3c5.5,0.1,55.9,0.3,113.1-14.9
		      c-20.3-36-42.1-66.3-45.4-70.7C65.7,60.8,40.1,92.3,32.2,130.3L32.2,130.3z M123.3,36.5c3.4,4.5,25.6,34.8,45.7,71.5
		      c43.5-16.3,61.9-41,64.1-44.1c-21.6-19.1-50-30.8-81.1-30.8C142.1,33.1,132.5,34.3,123.3,36.5L123.3,36.5z M246.7,78
		      c-2.6,3.5-23.1,29.7-68.3,48.2c2.8,5.8,5.6,11.7,8.1,17.7c0.9,2.1,1.8,4.2,2.6,6.3c40.7-5.1,81.2,3.1,85.2,3.9
		      C274.1,125.3,263.8,98.8,246.7,78L246.7,78z"/>
		  </symbol>
		</svg>

<!-- 右下のマーク -->
		<div class="side-note"><span>ToDo List</span></div>
		<div id="browserAlert" style="display: none"><span></span></div>

		<button class="btnSubmit" value="新規作成">新規作成</button>

<br>
</form>

<br>

<!-- グループ編集ボタン -->
			<form action="/group/edit" method="POST">
			<select name="gid">
				<option th:each="g:${glist}" th:value="${g.id}" th:text="${g.id}+'：'+${g.name}">
			</select>
			<input type="submit" value="グループ編集"></form>

			<a href="/list">タスク一覧へ</a>

</body>
</html>