<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>タスク管理</title>

<!-- jQuery -->
		<span th:replace="listJquery"></span>

</head>
<body>

<!-- ローディング画面表示 -->
		  <div id="try">
		  <div class='triangles'>
		  <div class='tri invert'></div>
		  <div class='tri invert'></div>
		  <div class='tri'></div>
		  <div class='tri invert'></div>
		  <div class='tri invert'></div>
		  <div class='tri'></div>
		  <div class='tri invert'></div>
		  <div class='tri'></div>
		  <div class='tri invert'></div>
		  <br>
		  <br>
		  <br>
		  <p> Loading...</p>
		</div>
		</div>

<!-- ローディング後に表示させるもの -->
		<div id="wrap">

		<h1>タスク一覧</h1>

<!-- カレンダー表示用 -->
		<header>
			<div id="datepicker"/>
			<br/>
		</header>

		<span th:replace="menu"></span>

<!-- 操作ボタン -->

		<form action="/task/update"  method="post">
			<input type="button"  value="更新" onclick="f();">
		</form>

		<form action="/look/trash"  method="post">
			<input type="submit"  value="ゴミ箱を見る">
		</form>

		<form action="/list/new"  method="post">
			<input type="submit"  value="タスク作成">
		</form>

<!-- 並べ方変更 -->
	<table border="1">
		<tr>
			<td><a href="/order/code">昇順</a></td>
			<td></td>
			<td></td>
			<td><a href="/order/deadline">近い順</a></td>
			<td><a href="/order/priority">高い順</a></td>
			<td></td>
			<td></td>
			<td><a href="/order/progress/desc">高い順</a></td>
			<td></td>
			<td></td><td></td>
		</tr>

		<tr>
			<td><a href="/order/code/desc">降順</a></td>
			<td></td>
			<td></td>
			<td><a href="/order/deadline/desc">遠い順</a></td>
			<td><a href="/order/priority/desc">低い順</a></td>
			<td></td>
			<td></td>
			<td><a href="/order/progress">低い順</a></td>
			<td></td>
			<td></td><td></td>
		</tr>

<!-- 表示バー -->
	<tr>
		<th>タスク番号</th>
		<th>タスク名</th>
		<th>作成者</th>
		<th>期限</th>
		<th>優先順位</th>
		<th>カテゴリ番号</th>
		<th>グループ番号</th>
		<th>進歩度</th>
		<th>備考</th>
		<th>削除</th>
		<th>編集</th>
	</tr>

<!-- タスク一覧表示 -->
	<tr th:each="list:${list}">

<!-- ダイアログ作成、コード取得 -->
		<td >
					<input class="dialog-link" type="submit" th:value="${list.code}">
					<div th:id="'dialog' + ${list.code}" style="display:none;">
 <!-- ダイアログに表示させる内容記述 -->
 					タスク名<p th:text="${list.name}"></p>
 					カテゴリ<p th:each="c:${clist}" th:if="${list.cgCode==c.code}" th:text="${c.name}"></p>
					グループ<p th:each="g:${glist}" th:if="${list.groupId==g.id}" th:text="${g.name}"></p>
<!--  					<p th:text="${u.name}"></p> -->
<!--  					<p th:text="${g.name}"></p> -->
<!--  					<p  th:text="${g.member}"></p> -->
 					メモ<p th:text="${list.memo}"></p>
				</div>
		</td>
		<td th:text="${list.name}"></td>
		<td><span th:each="u:${ulist}" th:if="${list.userId==u.id}" th:text="${u.name}"></span></td>
		<td><span th:text="${list.dline}"></span></td>
		<td><span th:each="p:${plist}" th:if="${list.prtNum==p.num}" th:text="${p.name}"></span></td>
		<td><span th:each="c:${clist}" th:if="${list.cgCode==c.code}" th:text="${c.name}"></span></td>
		<td><span th:each="g:${glist}" th:if="${list.groupId==g.id}" th:text="${g.name}"></span></td>
		<td><input type="range" min="0" max="100" step="10" th:value="${list.progress}" name="progress" class="progress"></td>
		<td th:text="${list.memo}"></td>

<!-- 消去ボタン -->
		<td><form action="/list/trash" method="post">
				<input type="hidden" th:value="${list.code}" name="code">
				<input type="hidden" th:value="${list.name}" name="name">
				<input type="hidden" th:value="${list.userId}" name="userId">
				<input type="hidden" th:value="${list.dline}" name="dline">
				<input type="hidden" th:value="${list.prtNum}" name="prtNum">
				<input type="hidden" th:value="${list.cgCode}" name="cgCode">
				<input type="hidden" th:value="${list.groupId}" name="groupId">
				<input type="hidden" th:value="${list.progress}" name="progress">
				<input type="hidden" th:value="${list.memo}" name="memo">
				<input type="submit" value="削除">
			</form>
		</td>

<!-- 編集ボタン -->
		<td><form action="/list/edit" method="post">
				<input type="hidden" th:value="${list.code}" name="code">
				<input type="submit" value="編集">
			</form>
		</td>
	</tr>

</table>

<!-- ログアウト -->
	<span th:replace="logout"></span>

</div>
</body>
</html>