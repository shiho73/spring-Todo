<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>タスク管理</title>

<!-- jQuery使用のための記述 -->
<link rel="stylesheet" href="/Loading.css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1/jquery-ui.min.js"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1/i18n/jquery.ui.datepicker-ja.min.js"></script>

<!-- ロード時間についてjQuery -->
<script type="text/javascript">
$(function() {
  var h = $(window).height();

  $('#wrap').css('display','none');
  $('#try ,#triangles').height(h).css('display','block');
});

$(window).load(function () { //全ての読み込みが完了したら実行
  $('#try').delay(900).fadeOut(800);
  $('#triangles').delay(600).fadeOut(300);
  $('#wrap').css('display', 'block');
});

//10秒たったら強制的にロード画面を非表示
$(function(){
  setTimeout('stopload()',10000);
});

function stopload(){
  $('#wrap').css('display','block');
  $('#try').delay(900).fadeOut(800);
  $('#triangles').delay(600).fadeOut(300);
}

//ローディング画面の消え方
$("submit").click(function() {
	$("#try").fadeOut(400, function(){ $(this).remove(); });
});

</script>

<!-- jQueryカレンダーのテンプレート取得 -->
<link rel="stylesheet" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1/themes/humanity/jquery-ui.css" >

<!-- カレンダー表示用jQuery -->
<script type="text/javascript">
$(function() {
    $("#datepicker").datepicker({
        // 日付が選択された時、日付をテキストフィールドへセット
        onSelect: function(dateText, inst) {
                    $("#date_val").val(dateText);
                }
    });
});

</script>

<!-- ダイアログ作成用jQuery -->
<script>
$(function() {
  $(".dialog-link").click(function() {
  	var selectNo = $(this).val();
    $(".dialog").dialog({
      modal:true,
      title:"タスク詳細",
      buttons: {
        "ＯＫ": function() {$(this).dialog("close");},
        "キャンセル": function() {$(this).dialog("close");}
      }
    });
  });
});
</script>

<!-- 先生から頂いたボタン　確認用 -->

<script type="text/javascript">
$(function(){

	$(".AAA").click(function(){
	    var selectNo = $(this).val();
	    alert(selectNo);
	});

});

</script>
</head>
<body>

<!-- ローディング画面表示 -->
  <div id="try">
  <div class='triangles'>
  <div class='tri invert'></div>
  <div class='tri invert'></div>
  <div class='tri'></div>
  <div class='tri invert'></div>
  <div class='tri invert'></div>
  <div class='tri'></div>
  <div class='tri invert'></div>
  <div class='tri'></div>
  <div class='tri invert'></div>
  <br>
  <br>
  <br>
  <p> Loading...</p>
</div>
</div>

<!-- ローディング後に表示させるもの -->
<div id="wrap">

<h1>タスク一覧</h1>

<!-- カレンダー表示用 -->
<header>
<div id="datepicker"/>
<br/>
</header>

	<span th:replace="menu"></span>
	<form action="/task/update"  method="post">
<!-- 		<input type="hidden" name="CODE" th:value="${list.code}">あ -->
	<input type="submit"  value="更新">
</form>
	<form action="/look/trash"  method="post">
	<input type="submit"  value="ゴミ箱を見る">
</form>
	<form action="/list/new"  method="post">
	<input type="submit"  value="タスク作成">
</form>

<table border="1">
	<tr>
		<td><a href="/order/code">昇順</a></td>
		<td></td>
		<td></td>
		<td><a href="/order/deadline">近い順</a></td>
		<td><a href="/order/priority">高い順</a></td>
		<td></td>
		<td></td>
		<td><a href="/order/progress/desc">高い順</a></td>
		<td></td>
		<td></td><td></td>
	</tr>

	<tr>
		<td><a href="/order/code/desc">降順</a></td>
		<td></td>
		<td></td>
		<td><a href="/order/deadline/desc">遠い順</a></td>
		<td><a href="/order/priority/desc">低い順</a></td>
		<td></td>
		<td></td>
		<td><a href="/order/progress">低い順</a></td>
		<td></td>
		<td></td><td></td>
	</tr>


	<tr>
		<th>タスク番号</th>
		<th>タスク名</th>
		<th>作成者</th>
		<th>期限</th>
		<th>優先順位</th>
		<th>カテゴリ番号</th>
		<th>グループ番号</th>
		<th>進歩度</th>
		<th>備考</th>
		<th>削除</th>
		<th>編集</th>
	</tr>

	<tr th:each="list:${list}">
		<td >
<!-- 一番にしか作用していない -->
				<input class="dialog-link" type="submit" th:value="${list.code}">
				<div class="dialog" style="display:none;">
 					<p>
						<!-- 表示させる内容記述 -->
 		 			</p>
				</div>
		</td>
		<td th:text="${list.name}"></td>
		<td><span th:each="u:${ulist}" th:if="${list.userId==u.id}" th:text="${u.name}"></span></td>
		<td><span th:text="${list.dline}"></span></td>
		<td><span th:each="p:${plist}" th:if="${list.prtNum==p.num}" th:text="${p.name}"></span></td>
		<td><span th:each="c:${clist}" th:if="${list.cgCode==c.code}" th:text="${c.name}"></span></td>
		<td><span th:each="g:${glist}" th:if="${list.groupId==g.id}" th:text="${g.name}"></span></td>

<!-- 進捗度をデータベースと紐づける予定 -->
		<td><input th:text="${list.progress}" type="range" min="0" max="100" step="10" value="0" name="progress"></td>
		<td th:text="${list.memo}"></td>
		<td><form action="/list/trash" method="post">
				<input type="hidden" th:value="${list.code}" name="code">
				<input type="hidden" th:value="${list.name}" name="name">
				<input type="hidden" th:value="${list.userId}" name="userId">
				<input type="hidden" th:value="${list.dline}" name="dline">
				<input type="hidden" th:value="${list.prtNum}" name="prtNum">
				<input type="hidden" th:value="${list.cgCode}" name="cgCode">
				<input type="hidden" th:value="${list.groupId}" name="groupId">
				<input type="hidden" th:value="${list.progress}" name="progress">
				<input type="hidden" th:value="${list.memo}" name="memo">
				<input type="submit" value="削除">
			</form>
		</td>
		<td><form action="/list/edit" method="post">
				<input type="hidden" th:value="${list.code}" name="code">
				<input type="submit" value="編集">
			</form>
		</td>
	</tr>

</table>

	<span th:replace="logout"></span>

<!-- 確認用 -->
<input type="button" class="AAA" value="ボタン１">
<input type="button" class="AAA" value="ボタン２">
<input type="button" class="AAA" value="ボタン３">
<input type="button" class="AAA" value="ボタン４">

</div>
</body>
</html>